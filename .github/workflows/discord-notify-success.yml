name: Discord Notification - Deploy Success

on:
    deployment_status:

jobs:
    notify-success:
        if: github.event.deployment_status.state == 'success'
        runs-on: ubuntu-latest
        steps:
            - name: Send Discord Success Notification
              env:
                  DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
                  DEPLOY_URL: ${{ github.event.deployment_status.target_url }}
              run: |
                  curl -H "Content-Type: application/json" \
                  -X POST \
                  -d "{
                    \"content\": \"ğŸš€ **ë°°í¬ ì„±ê³µ!**\",
                    \"embeds\": [{
                      \"title\": \"âœ… ${{ github.repository }} ë°°í¬ ì™„ë£Œ\",
                      \"description\": \"Broken Translatorê°€ ì„±ê³µì ìœ¼ë¡œ Vercelì— ë°°í¬ë˜ì—ˆìŠµë‹ˆë‹¤!\",
                      \"url\": \"$DEPLOY_URL\",
                      \"color\": 5763719,
                      \"fields\": [
                        { \"name\": \"Environment\", \"value\": \"${{ github.event.deployment.environment }}\", \"inline\": true },
                        { \"name\": \"Commit\", \"value\": \"[\`${{ github.event.deployment.sha }}\`](https://github.com/${{ github.repository }}/commit/${{ github.event.deployment.sha }})\", \"inline\": true },
                        { \"name\": \"Branch\", \"value\": \"${{ github.event.deployment.ref }}\", \"inline\": true },
                        { \"name\": \"ë°°í¬ URL\", \"value\": \"[ë°”ë¡œ ê°€ê¸°]($DEPLOY_URL)\", \"inline\": false }
                      ],
                      \"footer\": {
                        \"text\": \"Vercel Deployment\"
                      },
                      \"timestamp\": \"${{ github.event.deployment_status.updated_at }}\"
                    }]
                  }" \
                  $DISCORD_WEBHOOK
